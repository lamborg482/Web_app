{"ast":null,"code":"import axios from \"axios\";\nimport { ref, onMounted, watch } from \"vue\";\nexport default {\n  setup() {\n    const notes = ref([]);\n    const selectedNote = ref(null);\n    const isAddingNote = ref(false);\n    const newTitle = ref('');\n    const newDescription = ref('');\n    const fetchNotes = async () => {\n      try {\n        const response = await axios.get(`http://localhost:8000/notes/`);\n        notes.value = response.data;\n      } catch (error) {\n        console.error(\"Error fetching notes:\", error);\n      }\n    };\n    const addNote = async () => {\n      try {\n        await axios.post(`http://localhost:8000/notes/`, {\n          title: newTitle.value,\n          description: newDescription.value\n        });\n        newTitle.value = '';\n        newDescription.value = '';\n        isAddingNote.value = false;\n        fetchNotes();\n      } catch (error) {\n        console.error(\"Error adding note:\", error);\n      }\n    };\n    const selectNote = note => {\n      selectedNote.value = note;\n      isAddingNote.value = false;\n    };\n    const deleteNote = async note => {\n      if (!note) return;\n      try {\n        await axios.delete(`http://localhost:8000/notes/${note.id}`);\n        fetchNotes();\n        selectedNote.value = null;\n      } catch (error) {\n        console.error(\"Error deleting note:\", error);\n      }\n    };\n    const showAddNote = () => {\n      isAddingNote.value = true;\n      selectedNote.value = null;\n    };\n    watch(selectedNote, note => {\n      if (note) {\n        autoSave(note);\n      }\n    });\n    const autoSave = async note => {\n      if (note) {\n        try {\n          await axios.put(`http://localhost:8000/notes/${note.id}`, {\n            title: note.title,\n            description: note.description\n          });\n        } catch (error) {\n          console.error(\"Error updating note:\", error);\n        }\n      }\n    };\n    onMounted(fetchNotes);\n    return {\n      notes,\n      selectedNote,\n      isAddingNote,\n      newTitle,\n      newDescription,\n      addNote,\n      selectNote,\n      deleteNote,\n      showAddNote\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","watch","setup","notes","selectedNote","isAddingNote","newTitle","newDescription","fetchNotes","response","get","value","data","error","console","addNote","post","title","description","selectNote","note","deleteNote","delete","id","showAddNote","autoSave","put"],"sources":["/Users/timurmorozov/web_test/notes-app/src/components/NotesLine.vue"],"sourcesContent":["<template>\n    <div class=\"notes-container\">\n        <div class=\"sidebar\">\n\n            <div class=\"top-panel\">\n                <button @click=\"showAddNote\" class=\"add-button\">Добавить</button>\n                <button @click=\"deleteNote(selectedNote)\" class=\"delete-button\" :disabled=\"!selectedNote\" v-if=\"selectedNote\">Удалить</button>\n            </div>\n            <div class=\"divider\"></div>\n            <ul class=\"notes-list\">\n                <li v-for=\"note in notes\" :key=\"note.id\" @click=\"selectNote(note)\" class=\"note-item\" :class=\"{ active: selectedNote && selectedNote.id === note.id }\">\n                    <h2 class=\"note-title\">{{ note.title.length > 25 ? note.title.substring(0, 25) + '...' : note.title }}</h2>\n                    <h3>{{ note.created_at }}</h3>\n                    <div class=\"note-divider\"></div>\n                </li>\n            </ul>\n        </div>\n        <div class=\"content\">\n            <div v-if=\"isAddingNote\" class=\"cont_notes\">\n                <div class=\"cont_notes\">\n                    <h3>Создать новую заметку</h3>\n                    <textarea v-model=\"newTitle\" placeholder=\"Название\" required class=\"note-input\" ></textarea>\n                    <textarea v-model=\"newDescription\" placeholder=\"Описание\" required class=\"note-textarea\"></textarea>\n                    <div class=\"buttons\">\n                        <button @click=\"addNote\" class=\"save-button\">Сохранить</button>\n                    </div>\n                </div>\n            </div>\n            <div v-else-if=\"selectedNote\" class=\"cont_notes\">\n                <div class=\"cont_notes\">\n                    <textarea v-model=\"selectedNote.title\" class=\"note-input\" placeholder=\"Название\" required ></textarea>\n                    <div class=\"note-divider\"></div> \n                    <textarea v-model=\"selectedNote.description\" class=\"note-textarea\" placeholder=\"Описание\"></textarea>\n                    <div class=\"note-divider\"></div> \n                </div>\n            </div>\n            <div v-else>\n                <h3>Выберите заметку для просмотра её содержания</h3>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { ref, onMounted, watch } from \"vue\";\n\nexport default {\n    setup() {\n        const notes = ref([]);\n        const selectedNote = ref(null);\n        const isAddingNote = ref(false);\n        const newTitle = ref('');\n        const newDescription = ref('');\n\n        const fetchNotes = async () => {\n            try {\n                const response = await axios.get(`http://localhost:8000/notes/`);\n                notes.value = response.data;\n            } catch (error) {\n                console.error(\"Error fetching notes:\", error);\n            }\n        };\n\n        const addNote = async () => {\n            try {\n                await axios.post(`http://localhost:8000/notes/`, {\n                    title: newTitle.value,\n                    description: newDescription.value\n                });\n                newTitle.value = '';\n                newDescription.value = '';\n                isAddingNote.value = false;\n                fetchNotes();\n            } catch (error) {\n                console.error(\"Error adding note:\", error);\n            }\n        };\n\n        const selectNote = (note) => {\n            selectedNote.value = note;\n            isAddingNote.value = false;\n        };\n\n        const deleteNote = async (note) => {\n            if (!note) return;\n            try {\n                await axios.delete(`http://localhost:8000/notes/${note.id}`);\n                fetchNotes();\n                selectedNote.value = null;\n            } catch (error) {\n                console.error(\"Error deleting note:\", error);\n            }\n        };\n\n        const showAddNote = () => {\n            isAddingNote.value = true;\n            selectedNote.value = null; \n        };\n\n        watch(selectedNote, (note) => {\n            if (note) {\n                autoSave(note);\n            }\n        });\n\n        const autoSave = async (note) => {\n            if (note) {\n                try {\n                    await axios.put(`http://localhost:8000/notes/${note.id}`, {\n                        title: note.title,\n                        description: note.description\n                    });\n                } catch (error) {\n                    console.error(\"Error updating note:\", error);\n                }\n            }\n        };\n\n        onMounted(fetchNotes);\n\n        return {\n            notes,\n            selectedNote,\n            isAddingNote,\n            newTitle,\n            newDescription,\n            addNote,\n            selectNote,\n            deleteNote,\n            showAddNote\n        };\n    },\n};\n</script>\n\n<style lang=\"css\" scoped>\n@import url('/src/assets/style.css');\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}